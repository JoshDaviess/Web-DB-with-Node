<!doctype html>
<meta charset="utf-8">
<title>HappyOnlineShop</title>
<link rel="stylesheet" href="happystore.css">

<h1>Happy Online ☺︎ Shop</h1>

<ul id="categories">
  <li class='active'>Electronics
  <li>SomethingElse
</ul>

<section id="category">
  <h2>Electronics</h2>

  <section id="p1" class="product">
    <h2>Prod1</h2>
    <p class="price">10.99</p>
    <p class="desc">lorem ipsum sdofihqepgi unqerogiub qergiqerbu gvpiasng
    paisgnjae riobuaenr gbiaernbp aernbar epiguna ergioab </p>
    <p class="vendor">BigInc</p>
    <p class="stock">10+</p>
  </section>

  <section id="p2" class="product">
    <h2>Prod2</h2>
    <p class="price">79.99</p>
    <p class="desc">lorem ipsum sdofihqepgi unqerogiub qergiqerbu gvpiasng
    paisgnjae riobuaenr gbiaernbp aernbar epiguna ergioab </p>
    <p class="vendor">SmallInc</p>
    <p class="stock">only 3</p>
  </section>

  <section id="p3" class="product">
    <h2>Prod1</h2>
    <p class="price">10.99</p>
    <p class="desc">lorem ipsum sdofihqepgi unqerogiub qergiqerbu gvpiasng
    paisgnjae riobuaenr gbiaernbp aernbar epiguna ergioab </p>
    <p class="vendor">BigInc</p>
    <p class="stock">10+</p>
  </section>

  <section id="p4" class="product">
    <h2>Prod2</h2>
    <p class="price">79.99</p>
    <p class="desc">lorem ipsum sdofihqepgi unqerogiub qergiqerbu gvpiasng
    paisgnjae riobuaenr gbiaernbp aernbar epiguna ergioab </p>
    <p class="vendor">SmallInc</p>
    <p class="stock">only 3</p>
  </section>

  <section id="p5" class="product">
    <h2>Prod1</h2>
    <p class="price">10.99</p>
    <p class="desc">lorem ipsum sdofihqepgi unqerogiub qergiqerbu gvpiasng
    paisgnjae riobuaenr gbiaernbp aernbar epiguna ergioab </p>
    <p class="vendor">BigInc</p>
    <p class="stock">10+</p>
  </section>

  <section id="p6" class="product">
    <h2>Prod2</h2>
    <p class="price">79.99</p>
    <p class="desc">lorem ipsum sdofihqepgi unqerogiub qergiqerbu gvpiasng
    paisgnjae riobuaenr gbiaernbp aernbar epiguna ergioab </p>
    <p class="vendor">SmallInc</p>
    <p class="stock">only 3</p>
  </section>

  <section id="p7" class="product">
    <h2>Prod1</h2>
    <p class="price">10.99</p>
    <p class="desc">lorem ipsum sdofihqepgi unqerogiub qergiqerbu gvpiasng
    paisgnjae riobuaenr gbiaernbp aernbar epiguna ergioab </p>
    <p class="vendor">BigInc</p>
    <p class="stock">10+</p>
  </section>

  <section id="p8" class="product">
    <h2>Prod2</h2>
    <p class="price">79.99</p>
    <p class="desc">lorem ipsum sdofihqepgi unqerogiub qergiqerbu gvpiasng
    paisgnjae riobuaenr gbiaernbp aernbar epiguna ergioab </p>
    <p class="vendor">SmallInc</p>
    <p class="stock">only 3</p>
  </section>

  <section id="p9" class="product">
    <h2>Prod1</h2>
    <p class="price">10.99</p>
    <p class="desc">lorem ipsum sdofihqepgi unqerogiub qergiqerbu gvpiasng
    paisgnjae riobuaenr gbiaernbp aernbar epiguna ergioab </p>
    <p class="vendor">BigInc</p>
    <p class="stock">10+</p>
  </section>

<template id="product-template">
  <section id="p10" class="product">
    <h2>Prod2</h2>
    <p class="price">79.99</p>
    <p class="desc">lorem ipsum sdofihqepgi unqerogiub qergiqerbu gvpiasng
    paisgnjae riobuaenr gbiaernbp aernbar epiguna ergioab </p>
    <p class="vendor">SmallInc</p>
    <p class="stock">only 3</p>
  </section>
</template>

</section>

<script>

    'use strict';
    var categoriesURL = new URL('/api/categories/');
    var apiKey = 'orewgthwoetgoirwejgboerigqt';
    
    function loadCategories() {
        var xhr = new XMLHttpRequest();
        xhr.onload = populateCategories;
        xhr.onerror = function() {
            console.error("error loading categories");
            setTimeout(loadCategories, 5000);
        }
        xhr.open("get", categoriesURL, true);
        xhr.send();
    }
    
    function loadProducts(categoryURI) {
        var xhr = new XMLHttpRequest();
        xhr.onload = populateProducts;
        xhr.onerror = function() {
            console.error("error loading products from category " + categoryURI);
        }
        xhr.open("get", categoryURI, true);
        xhr.send();
    }
</script>
